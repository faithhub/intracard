import"./app-B9jtdv3Q.js";import{z as e,C as a,L as t,O as o,E as s,v as i,K as l,H as r,G as n,F as d,D as c,y as m}from"./vendor-DWrK2g1_.js";import{_ as u,a as f,C as h,b as p,e as y,f as g,v,H as w,I as V,i as b,J as C,K as D,V as P,y as _,L as x,z as E,F as S,k as T,h as k,M,G as N,j as U,x as F,N as j}from"./main-DhXQbgH3.js";const L={class:"d-flex justify-center py-10"},R={class:"d-flex align-center"},q={class:"text-h6"},z={class:"d-flex"},A={key:0},I={class:"d-flex"},G={class:"d-flex"},H={key:0},K={class:"d-flex"};const Y=u({data:()=>({currentStep:1,defaultStep:1,showPassword:!1,showEmailVerification:!1,showPhoneVerification:!1,emailVerificationCode:"",phoneVerificationCode:"",verifyingEmail:!1,verifyingPhone:!1,verifyingEmailCode:!1,verifyingPhoneCode:!1,showToast:!1,toastMessage:"",toastColor:"success",isEmailVerified:!1,isPhoneVerified:!1,formData:{firstName:"",lastName:"",middleName:"",email:"",phone:"",password:"",passwordConfirm:"",consent:!1,accountType:null},steps:[{title:"Personal Details",subtitle:"Provide with us your details",icon:"mdi-account"},{title:"Account Type",subtitle:"Select your account type",icon:"mdi-file-document"},{title:"Address",subtitle:"Setup your rental/mortgage address",icon:"mdi-map-marker"},{title:"Payment Details",subtitle:"Setup your payment details",icon:"mdi-cash"},{title:"Verification",subtitle:"Verify personal information",icon:"mdi-shield-check"}],rules:{password:[e=>!!e||"Password is required",e=>e.length>=8||"Password must be at least 8 characters",e=>/[A-Z]/.test(e)||"Must contain uppercase letter",e=>/[0-9]/.test(e)||"Must contain number",e=>/[^A-Za-z0-9]/.test(e)||"Must contain symbol"],email:[e=>!!e||"Email is required",e=>/.+@.+\..+/.test(e)||"Email must be valid"],phone:[e=>!!e||"Phone number is required",e=>/^\d{10}$/.test(e)||"Must be 10 digits"]}}),created(){this.currentStep=this.defaultStep||1},mounted(){this.currentStep=1},watch:{currentStep:{immediate:!0,handler(e){console.log("Current step changed to:",e)}}},computed:{canProceed(){switch(this.currentStep){case 1:return this.isPersonalDetailsValid;case 2:return!!this.formData.accountType;default:return!0}},isPersonalDetailsValid(){return this.formData.firstName&&this.formData.lastName&&this.formData.email&&this.formData.phone&&this.formData.password&&this.formData.password===this.formData.passwordConfirm&&this.formData.consent&&this.isEmailVerified&&this.isPhoneVerified}},props:{defaultStep:{type:Number,default:1}},beforeMount(){console.log("Default step:",this.defaultStep),this.currentStep=this.defaultStep},methods:{async sendEmailVerification(){var e,a;this.verifyingEmail=!0;try{await f.post("/api/verify-email",{email:this.formData.email});this.showEmailVerification=!0,this.showToastMessage("Verification code sent to your email")}catch(t){this.showToastMessage((null==(a=null==(e=t.response)?void 0:e.data)?void 0:a.message)||"Failed to send verification code","error")}finally{this.verifyingEmail=!1}},async verifyEmailCode(){var e,a;this.verifyingEmailCode=!0;try{await f.post("/api/verify-email-code",{email:this.formData.email,code:this.emailVerificationCode});this.isEmailVerified=!0,this.showEmailVerification=!1,this.showToastMessage("Email verified successfully")}catch(t){this.showToastMessage((null==(a=null==(e=t.response)?void 0:e.data)?void 0:a.message)||"Invalid verification code","error")}finally{this.verifyingEmailCode=!1}},async sendPhoneVerification(){var e,a;this.verifyingPhone=!0;try{await f.post("/api/verify-phone",{phone:this.formData.phone});this.showPhoneVerification=!0,this.showToastMessage("Verification code sent to your phone")}catch(t){this.showToastMessage((null==(a=null==(e=t.response)?void 0:e.data)?void 0:a.message)||"Failed to send verification code","error")}finally{this.verifyingPhone=!1}},async verifyPhoneCode(){var e,a;this.verifyingPhoneCode=!0;try{await f.post("/api/verify-phone-code",{phone:this.formData.phone,code:this.phoneVerificationCode});this.isPhoneVerified=!0,this.showPhoneVerification=!1,this.showToastMessage("Phone verified successfully")}catch(t){this.showToastMessage((null==(a=null==(e=t.response)?void 0:e.data)?void 0:a.message)||"Invalid verification code","error")}finally{this.verifyingPhoneCode=!1}},showToastMessage(e,a="success"){this.toastMessage=e,this.toastColor=a,this.showToast=!0},async handleNextStep(){this.currentStep<this.steps.length?this.canProceed&&this.currentStep++:await this.submitForm()},async submitForm(){var e,a;try{await f.post("/api/register",this.formData);this.showToastMessage("Registration successful"),window.location.href="/login"}catch(t){this.showToastMessage((null==(a=null==(e=t.response)?void 0:e.data)?void 0:a.message)||"Registration failed","error")}}}},[["render",function(u,f,Y,Z,J,O){return t(),e(h,null,{default:a((()=>[o(F,{fluid:"",class:"pa-0 fill-height"},{default:a((()=>[o(p,{"no-gutters":"",class:"fill-height"},{default:a((()=>[o(y,{cols:"12",md:"3",class:"bg-primary-light"},{default:a((()=>[o(g,{class:"pa-6 h-100",color:"transparent"},{default:a((()=>[s("div",L,[o(v,{src:"/images/logo.png","max-width":"200",contain:""})]),o(w,{modelValue:J.currentStep,"onUpdate:modelValue":f[0]||(f[0]=e=>J.currentStep=e),direction:"vertical",class:"bg-transparent elevation-0"},{default:a((()=>[(t(!0),i(d,null,l(J.steps,((i,l)=>(t(),e(V,{key:l,value:l+1,complete:J.currentStep>l+1},{title:a((()=>[s("div",R,[o(b,{icon:i.icon,class:"mr-2"},null,8,["icon"]),s("span",q,r(i.title),1)])])),subtitle:a((()=>[n(r(i.subtitle),1)])),_:2},1032,["value","complete"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),o(y,{cols:"12",md:"9",class:"pa-8"},{default:a((()=>[o(C,{modelValue:J.currentStep,"onUpdate:modelValue":f[14]||(f[14]=e=>J.currentStep=e),value:1},{default:a((()=>[o(D,{value:"1"},{default:a((()=>[o(P,{flat:""},{default:a((()=>[o(_,{class:"text-h4 font-weight-bold"},{default:a((()=>f[18]||(f[18]=[n(" Let's get started ")]))),_:1}),o(x,{class:"text-subtitle-1 mt-2"},{default:a((()=>f[19]||(f[19]=[n(" You're just a few steps away from a more rewarding experience ")]))),_:1}),o(E,null,{default:a((()=>[o(S,{ref:"personalForm"},{default:a((()=>[o(p,null,{default:a((()=>[o(y,{cols:"12",md:"6"},{default:a((()=>[o(T,{modelValue:J.formData.firstName,"onUpdate:modelValue":f[1]||(f[1]=e=>J.formData.firstName=e),label:"First Name",rules:[e=>!!e||"First name is required"],placeholder:"Enter first name",variant:"outlined",density:"comfortable"},null,8,["modelValue","rules"])])),_:1}),o(y,{cols:"12",md:"6"},{default:a((()=>[o(T,{modelValue:J.formData.lastName,"onUpdate:modelValue":f[2]||(f[2]=e=>J.formData.lastName=e),label:"Last Name",rules:[e=>!!e||"Last name is required"],placeholder:"Enter last name",variant:"outlined",density:"comfortable"},null,8,["modelValue","rules"])])),_:1})])),_:1}),o(T,{modelValue:J.formData.middleName,"onUpdate:modelValue":f[3]||(f[3]=e=>J.formData.middleName=e),label:"Middle Name (optional)",placeholder:"Enter middle name",variant:"outlined",density:"comfortable"},null,8,["modelValue"]),o(T,{modelValue:J.formData.password,"onUpdate:modelValue":f[4]||(f[4]=e=>J.formData.password=e),label:"Password",rules:u.passwordRules,placeholder:"Enter password",variant:"outlined",density:"comfortable","append-inner-icon":J.showPassword?"mdi-eye-off":"mdi-eye",type:J.showPassword?"text":"password","onClick:appendInner":f[5]||(f[5]=e=>J.showPassword=!J.showPassword)},null,8,["modelValue","rules","append-inner-icon","type"]),f[24]||(f[24]=s("div",{class:"text-caption text-grey"}," Use 8 or more characters with a mix of letters, numbers & symbols ",-1)),o(T,{modelValue:J.formData.passwordConfirm,"onUpdate:modelValue":f[6]||(f[6]=e=>J.formData.passwordConfirm=e),label:"Confirm Password",rules:[e=>!!e||"Please confirm your password",e=>e===J.formData.password||"Passwords do not match"],placeholder:"Confirm password",variant:"outlined",density:"comfortable",type:J.showPassword?"text":"password"},null,8,["modelValue","rules","type"]),s("div",z,[o(T,{modelValue:J.formData.email,"onUpdate:modelValue":f[7]||(f[7]=e=>J.formData.email=e),label:"Email",rules:u.emailRules,placeholder:"Enter email address",variant:"outlined",density:"comfortable",class:"flex-grow-1 mr-2"},null,8,["modelValue","rules"]),o(k,{color:"primary",loading:J.verifyingEmail,disabled:!J.formData.email||J.verifyingEmail,onClick:O.sendEmailVerification},{default:a((()=>f[20]||(f[20]=[n(" Get Code ")]))),_:1},8,["loading","disabled","onClick"])]),o(M,null,{default:a((()=>[J.showEmailVerification?(t(),i("div",A,[s("div",I,[o(T,{modelValue:J.emailVerificationCode,"onUpdate:modelValue":f[8]||(f[8]=e=>J.emailVerificationCode=e),label:"Verification Code",placeholder:"Enter 6-digit code",variant:"outlined",density:"comfortable",class:"flex-grow-1 mr-2",maxlength:"6"},null,8,["modelValue"]),o(k,{color:"primary",loading:J.verifyingEmailCode,onClick:O.verifyEmailCode},{default:a((()=>f[21]||(f[21]=[n(" Verify ")]))),_:1},8,["loading","onClick"])])])):c("",!0)])),_:1}),s("div",G,[o(T,{modelValue:J.formData.phone,"onUpdate:modelValue":f[9]||(f[9]=e=>J.formData.phone=e),label:"Phone Number",rules:u.phoneRules,placeholder:"Enter phone number",variant:"outlined",density:"comfortable",class:"flex-grow-1 mr-2","prepend-inner-icon":"mdi-flag",prefix:1},null,8,["modelValue","rules"]),o(k,{color:"primary",loading:J.verifyingPhone,disabled:!J.formData.phone||J.verifyingPhone,onClick:O.sendPhoneVerification},{default:a((()=>f[22]||(f[22]=[n(" Get Code ")]))),_:1},8,["loading","disabled","onClick"])]),o(M,null,{default:a((()=>[J.showPhoneVerification?(t(),i("div",H,[s("div",K,[o(T,{modelValue:J.phoneVerificationCode,"onUpdate:modelValue":f[10]||(f[10]=e=>J.phoneVerificationCode=e),label:"Verification Code",placeholder:"Enter 6-digit code",variant:"outlined",density:"comfortable",class:"flex-grow-1 mr-2",maxlength:"6"},null,8,["modelValue"]),o(k,{color:"primary",loading:J.verifyingPhoneCode,onClick:O.verifyPhoneCode},{default:a((()=>f[23]||(f[23]=[n(" Verify ")]))),_:1},8,["loading","onClick"])])])):c("",!0)])),_:1}),o(N,{modelValue:J.formData.consent,"onUpdate:modelValue":f[11]||(f[11]=e=>J.formData.consent=e),label:"For the above presented mean of contact email, phone and address",rules:[e=>!!e||"You must agree to proceed"]},null,8,["modelValue","rules"])])),_:1},512)])),_:1})])),_:1})])),_:1}),o(D,{value:"2"},{default:a((()=>[o(P,{flat:""},{default:a((()=>[o(_,{class:"text-h4 font-weight-bold"},{default:a((()=>f[25]||(f[25]=[n(" What are your primary goals with Intracard? ")]))),_:1}),o(x,{class:"text-subtitle-1 mt-2"},{default:a((()=>f[26]||(f[26]=[n(" Help us tailor your experience ")]))),_:1}),o(E,null,{default:a((()=>[o(p,null,{default:a((()=>[o(y,{cols:"12",md:"6"},{default:a((()=>[o(P,{color:"rent"===J.formData.accountType?"primary":"",onClick:f[12]||(f[12]=e=>J.formData.accountType="rent"),class:m(["pa-4 cursor-pointer",{"text-white":"rent"===J.formData.accountType}])},{default:a((()=>[o(b,{size:"32",class:"mb-2"},{default:a((()=>f[27]||(f[27]=[n("mdi-home")]))),_:1}),f[28]||(f[28]=s("div",{class:"text-h6"},"Rent",-1)),f[29]||(f[29]=s("div",{class:"text-subtitle-2"}," Pay my rent with a credit or debit card. ",-1))])),_:1},8,["color","class"])])),_:1}),o(y,{cols:"12",md:"6"},{default:a((()=>[o(P,{color:"mortgage"===J.formData.accountType?"primary":"",onClick:f[13]||(f[13]=e=>J.formData.accountType="mortgage"),class:m(["pa-4 cursor-pointer",{"text-white":"mortgage"===J.formData.accountType}])},{default:a((()=>[o(b,{size:"32",class:"mb-2"},{default:a((()=>f[30]||(f[30]=[n("mdi-bank")]))),_:1}),f[31]||(f[31]=s("div",{class:"text-h6"},"Mortgage",-1)),f[32]||(f[32]=s("div",{class:"text-subtitle-2"}," Pay my mortgage with a credit or debit card. ",-1))])),_:1},8,["color","class"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),o(p,{class:"mt-4"},{default:a((()=>[o(y,{class:"d-flex"},{default:a((()=>[J.currentStep>1?(t(),e(k,{key:0,color:"secondary",variant:"outlined",onClick:f[15]||(f[15]=e=>J.currentStep--)},{default:a((()=>f[33]||(f[33]=[n(" Previous ")]))),_:1})):c("",!0),o(U),o(k,{color:"primary",onClick:O.handleNextStep,disabled:!O.canProceed},{default:a((()=>[n(r(J.currentStep===J.steps.length?"Submit":"Continue"),1)])),_:1},8,["onClick","disabled"])])),_:1})])),_:1}),f[34]||(f[34]=s("div",{class:"text-center mt-4"},[n(" Already have an account? "),s("a",{href:"/login",class:"text-primary font-weight-bold text-decoration-none"}," Login here ")],-1))])),_:1})])),_:1})])),_:1}),o(j,{modelValue:J.showToast,"onUpdate:modelValue":f[17]||(f[17]=e=>J.showToast=e),color:J.toastColor,timeout:3e3},{actions:a((()=>[o(k,{color:"white",variant:"text",onClick:f[16]||(f[16]=e=>J.showToast=!1)},{default:a((()=>f[35]||(f[35]=[n(" Close ")]))),_:1})])),default:a((()=>[n(r(J.toastMessage)+" ",1)])),_:1},8,["modelValue","color"])])),_:1})}]]);export{Y as default};
