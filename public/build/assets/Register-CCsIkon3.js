import"./app-DZGKe3Aq.js";import{_ as k,R as c,z as w,C as a,aq as N,L as p,O as o,$ as h,a0 as m,a1 as M,E as n,ai as U,ay as F,v,K as R,az as I,a4 as b,H as y,G as l,F as A,aA as q,aB as D,Z as g,am as x,aC as P,an as E,aw as z,a6 as d,a3 as u,aD as S,D as C,ax as B,y as T,a5 as L,al as G,aE as W}from"./main-DHxkGDom.js";const Z={data(){return{currentStep:1,defaultStep:1,showPassword:!1,showEmailVerification:!1,showPhoneVerification:!1,emailVerificationCode:"",phoneVerificationCode:"",verifyingEmail:!1,verifyingPhone:!1,verifyingEmailCode:!1,verifyingPhoneCode:!1,showToast:!1,toastMessage:"",toastColor:"success",isEmailVerified:!1,isPhoneVerified:!1,formData:{firstName:"",lastName:"",middleName:"",email:"",phone:"",password:"",passwordConfirm:"",consent:!1,accountType:null},steps:[{title:"Personal Details",subtitle:"Provide with us your details",icon:"mdi-account"},{title:"Account Type",subtitle:"Select your account type",icon:"mdi-file-document"},{title:"Address",subtitle:"Setup your rental/mortgage address",icon:"mdi-map-marker"},{title:"Payment Details",subtitle:"Setup your payment details",icon:"mdi-cash"},{title:"Verification",subtitle:"Verify personal information",icon:"mdi-shield-check"}],rules:{password:[i=>!!i||"Password is required",i=>i.length>=8||"Password must be at least 8 characters",i=>/[A-Z]/.test(i)||"Must contain uppercase letter",i=>/[0-9]/.test(i)||"Must contain number",i=>/[^A-Za-z0-9]/.test(i)||"Must contain symbol"],email:[i=>!!i||"Email is required",i=>/.+@.+\..+/.test(i)||"Email must be valid"],phone:[i=>!!i||"Phone number is required",i=>/^\d{10}$/.test(i)||"Must be 10 digits"]}}},created(){this.currentStep=this.defaultStep||1},mounted(){this.currentStep=1},watch:{currentStep:{immediate:!0,handler(i){console.log("Current step changed to:",i)}}},computed:{canProceed(){switch(this.currentStep){case 1:return this.isPersonalDetailsValid;case 2:return!!this.formData.accountType;default:return!0}},isPersonalDetailsValid(){return this.formData.firstName&&this.formData.lastName&&this.formData.email&&this.formData.phone&&this.formData.password&&this.formData.password===this.formData.passwordConfirm&&this.formData.consent&&this.isEmailVerified&&this.isPhoneVerified}},props:{defaultStep:{type:Number,default:1}},beforeMount(){console.log("Default step:",this.defaultStep),this.currentStep=this.defaultStep},methods:{async sendEmailVerification(){var i,e;this.verifyingEmail=!0;try{const r=await c.post("/api/verify-email",{email:this.formData.email});this.showEmailVerification=!0,this.showToastMessage("Verification code sent to your email")}catch(r){this.showToastMessage(((e=(i=r.response)==null?void 0:i.data)==null?void 0:e.message)||"Failed to send verification code","error")}finally{this.verifyingEmail=!1}},async verifyEmailCode(){var i,e;this.verifyingEmailCode=!0;try{const r=await c.post("/api/verify-email-code",{email:this.formData.email,code:this.emailVerificationCode});this.isEmailVerified=!0,this.showEmailVerification=!1,this.showToastMessage("Email verified successfully")}catch(r){this.showToastMessage(((e=(i=r.response)==null?void 0:i.data)==null?void 0:e.message)||"Invalid verification code","error")}finally{this.verifyingEmailCode=!1}},async sendPhoneVerification(){var i,e;this.verifyingPhone=!0;try{const r=await c.post("/api/verify-phone",{phone:this.formData.phone});this.showPhoneVerification=!0,this.showToastMessage("Verification code sent to your phone")}catch(r){this.showToastMessage(((e=(i=r.response)==null?void 0:i.data)==null?void 0:e.message)||"Failed to send verification code","error")}finally{this.verifyingPhone=!1}},async verifyPhoneCode(){var i,e;this.verifyingPhoneCode=!0;try{const r=await c.post("/api/verify-phone-code",{phone:this.formData.phone,code:this.phoneVerificationCode});this.isPhoneVerified=!0,this.showPhoneVerification=!1,this.showToastMessage("Phone verified successfully")}catch(r){this.showToastMessage(((e=(i=r.response)==null?void 0:i.data)==null?void 0:e.message)||"Invalid verification code","error")}finally{this.verifyingPhoneCode=!1}},showToastMessage(i,e="success"){this.toastMessage=i,this.toastColor=e,this.showToast=!0},async handleNextStep(){this.currentStep<this.steps.length?this.canProceed&&this.currentStep++:await this.submitForm()},async submitForm(){var i,e;try{const r=await c.post("/api/register",this.formData);this.showToastMessage("Registration successful"),window.location.href="/login"}catch(r){this.showToastMessage(((e=(i=r.response)==null?void 0:i.data)==null?void 0:e.message)||"Registration failed","error")}}}},j={class:"d-flex justify-center py-10"},H={class:"d-flex align-center"},Y={class:"text-h6"},K={class:"d-flex"},O={key:0},J={class:"d-flex"},Q={class:"d-flex"},X={key:0},_={class:"d-flex"};function $(i,e,r,ee,t,f){return p(),w(N,null,{default:a(()=>[o(G,{fluid:"",class:"pa-0 fill-height"},{default:a(()=>[o(h,{"no-gutters":"",class:"fill-height"},{default:a(()=>[o(m,{cols:"12",md:"3",class:"bg-primary-light"},{default:a(()=>[o(M,{class:"pa-6 h-100",color:"transparent"},{default:a(()=>[n("div",j,[o(U,{src:"/images/logo.png","max-width":"200",contain:""})]),o(F,{modelValue:t.currentStep,"onUpdate:modelValue":e[0]||(e[0]=s=>t.currentStep=s),direction:"vertical",class:"bg-transparent elevation-0"},{default:a(()=>[(p(!0),v(A,null,R(t.steps,(s,V)=>(p(),w(I,{key:V,value:V+1,complete:t.currentStep>V+1},{title:a(()=>[n("div",H,[o(b,{icon:s.icon,class:"mr-2"},null,8,["icon"]),n("span",Y,y(s.title),1)])]),subtitle:a(()=>[l(y(s.subtitle),1)]),_:2},1032,["value","complete"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),o(m,{cols:"12",md:"9",class:"pa-8"},{default:a(()=>[o(q,{modelValue:t.currentStep,"onUpdate:modelValue":e[14]||(e[14]=s=>t.currentStep=s),value:1},{default:a(()=>[o(D,{value:"1"},{default:a(()=>[o(g,{flat:""},{default:a(()=>[o(x,{class:"text-h4 font-weight-bold"},{default:a(()=>e[18]||(e[18]=[l(" Let's get started ")])),_:1}),o(P,{class:"text-subtitle-1 mt-2"},{default:a(()=>e[19]||(e[19]=[l(" You're just a few steps away from a more rewarding experience ")])),_:1}),o(E,null,{default:a(()=>[o(z,{ref:"personalForm"},{default:a(()=>[o(h,null,{default:a(()=>[o(m,{cols:"12",md:"6"},{default:a(()=>[o(d,{modelValue:t.formData.firstName,"onUpdate:modelValue":e[1]||(e[1]=s=>t.formData.firstName=s),label:"First Name",rules:[s=>!!s||"First name is required"],placeholder:"Enter first name",variant:"outlined",density:"comfortable"},null,8,["modelValue","rules"])]),_:1}),o(m,{cols:"12",md:"6"},{default:a(()=>[o(d,{modelValue:t.formData.lastName,"onUpdate:modelValue":e[2]||(e[2]=s=>t.formData.lastName=s),label:"Last Name",rules:[s=>!!s||"Last name is required"],placeholder:"Enter last name",variant:"outlined",density:"comfortable"},null,8,["modelValue","rules"])]),_:1})]),_:1}),o(d,{modelValue:t.formData.middleName,"onUpdate:modelValue":e[3]||(e[3]=s=>t.formData.middleName=s),label:"Middle Name (optional)",placeholder:"Enter middle name",variant:"outlined",density:"comfortable"},null,8,["modelValue"]),o(d,{modelValue:t.formData.password,"onUpdate:modelValue":e[4]||(e[4]=s=>t.formData.password=s),label:"Password",rules:i.passwordRules,placeholder:"Enter password",variant:"outlined",density:"comfortable","append-inner-icon":t.showPassword?"mdi-eye-off":"mdi-eye",type:t.showPassword?"text":"password","onClick:appendInner":e[5]||(e[5]=s=>t.showPassword=!t.showPassword)},null,8,["modelValue","rules","append-inner-icon","type"]),e[24]||(e[24]=n("div",{class:"text-caption text-grey"}," Use 8 or more characters with a mix of letters, numbers & symbols ",-1)),o(d,{modelValue:t.formData.passwordConfirm,"onUpdate:modelValue":e[6]||(e[6]=s=>t.formData.passwordConfirm=s),label:"Confirm Password",rules:[s=>!!s||"Please confirm your password",s=>s===t.formData.password||"Passwords do not match"],placeholder:"Confirm password",variant:"outlined",density:"comfortable",type:t.showPassword?"text":"password"},null,8,["modelValue","rules","type"]),n("div",K,[o(d,{modelValue:t.formData.email,"onUpdate:modelValue":e[7]||(e[7]=s=>t.formData.email=s),label:"Email",rules:i.emailRules,placeholder:"Enter email address",variant:"outlined",density:"comfortable",class:"flex-grow-1 mr-2"},null,8,["modelValue","rules"]),o(u,{color:"primary",loading:t.verifyingEmail,disabled:!t.formData.email||t.verifyingEmail,onClick:f.sendEmailVerification},{default:a(()=>e[20]||(e[20]=[l(" Get Code ")])),_:1},8,["loading","disabled","onClick"])]),o(S,null,{default:a(()=>[t.showEmailVerification?(p(),v("div",O,[n("div",J,[o(d,{modelValue:t.emailVerificationCode,"onUpdate:modelValue":e[8]||(e[8]=s=>t.emailVerificationCode=s),label:"Verification Code",placeholder:"Enter 6-digit code",variant:"outlined",density:"comfortable",class:"flex-grow-1 mr-2",maxlength:"6"},null,8,["modelValue"]),o(u,{color:"primary",loading:t.verifyingEmailCode,onClick:f.verifyEmailCode},{default:a(()=>e[21]||(e[21]=[l(" Verify ")])),_:1},8,["loading","onClick"])])])):C("",!0)]),_:1}),n("div",Q,[o(d,{modelValue:t.formData.phone,"onUpdate:modelValue":e[9]||(e[9]=s=>t.formData.phone=s),label:"Phone Number",rules:i.phoneRules,placeholder:"Enter phone number",variant:"outlined",density:"comfortable",class:"flex-grow-1 mr-2","prepend-inner-icon":"mdi-flag",prefix:1},null,8,["modelValue","rules"]),o(u,{color:"primary",loading:t.verifyingPhone,disabled:!t.formData.phone||t.verifyingPhone,onClick:f.sendPhoneVerification},{default:a(()=>e[22]||(e[22]=[l(" Get Code ")])),_:1},8,["loading","disabled","onClick"])]),o(S,null,{default:a(()=>[t.showPhoneVerification?(p(),v("div",X,[n("div",_,[o(d,{modelValue:t.phoneVerificationCode,"onUpdate:modelValue":e[10]||(e[10]=s=>t.phoneVerificationCode=s),label:"Verification Code",placeholder:"Enter 6-digit code",variant:"outlined",density:"comfortable",class:"flex-grow-1 mr-2",maxlength:"6"},null,8,["modelValue"]),o(u,{color:"primary",loading:t.verifyingPhoneCode,onClick:f.verifyPhoneCode},{default:a(()=>e[23]||(e[23]=[l(" Verify ")])),_:1},8,["loading","onClick"])])])):C("",!0)]),_:1}),o(B,{modelValue:t.formData.consent,"onUpdate:modelValue":e[11]||(e[11]=s=>t.formData.consent=s),label:"For the above presented mean of contact email, phone and address",rules:[s=>!!s||"You must agree to proceed"]},null,8,["modelValue","rules"])]),_:1},512)]),_:1})]),_:1})]),_:1}),o(D,{value:"2"},{default:a(()=>[o(g,{flat:""},{default:a(()=>[o(x,{class:"text-h4 font-weight-bold"},{default:a(()=>e[25]||(e[25]=[l(" What are your primary goals with Intracard? ")])),_:1}),o(P,{class:"text-subtitle-1 mt-2"},{default:a(()=>e[26]||(e[26]=[l(" Help us tailor your experience ")])),_:1}),o(E,null,{default:a(()=>[o(h,null,{default:a(()=>[o(m,{cols:"12",md:"6"},{default:a(()=>[o(g,{color:t.formData.accountType==="rent"?"primary":"",onClick:e[12]||(e[12]=s=>t.formData.accountType="rent"),class:T(["pa-4 cursor-pointer",{"text-white":t.formData.accountType==="rent"}])},{default:a(()=>[o(b,{size:"32",class:"mb-2"},{default:a(()=>e[27]||(e[27]=[l("mdi-home")])),_:1}),e[28]||(e[28]=n("div",{class:"text-h6"},"Rent",-1)),e[29]||(e[29]=n("div",{class:"text-subtitle-2"}," Pay my rent with a credit or debit card. ",-1))]),_:1},8,["color","class"])]),_:1}),o(m,{cols:"12",md:"6"},{default:a(()=>[o(g,{color:t.formData.accountType==="mortgage"?"primary":"",onClick:e[13]||(e[13]=s=>t.formData.accountType="mortgage"),class:T(["pa-4 cursor-pointer",{"text-white":t.formData.accountType==="mortgage"}])},{default:a(()=>[o(b,{size:"32",class:"mb-2"},{default:a(()=>e[30]||(e[30]=[l("mdi-bank")])),_:1}),e[31]||(e[31]=n("div",{class:"text-h6"},"Mortgage",-1)),e[32]||(e[32]=n("div",{class:"text-subtitle-2"}," Pay my mortgage with a credit or debit card. ",-1))]),_:1},8,["color","class"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(h,{class:"mt-4"},{default:a(()=>[o(m,{class:"d-flex"},{default:a(()=>[t.currentStep>1?(p(),w(u,{key:0,color:"secondary",variant:"outlined",onClick:e[15]||(e[15]=s=>t.currentStep--)},{default:a(()=>e[33]||(e[33]=[l(" Previous ")])),_:1})):C("",!0),o(L),o(u,{color:"primary",onClick:f.handleNextStep,disabled:!f.canProceed},{default:a(()=>[l(y(t.currentStep===t.steps.length?"Submit":"Continue"),1)]),_:1},8,["onClick","disabled"])]),_:1})]),_:1}),e[34]||(e[34]=n("div",{class:"text-center mt-4"},[l(" Already have an account? "),n("a",{href:"/login",class:"text-primary font-weight-bold text-decoration-none"}," Login here ")],-1))]),_:1})]),_:1})]),_:1}),o(W,{modelValue:t.showToast,"onUpdate:modelValue":e[17]||(e[17]=s=>t.showToast=s),color:t.toastColor,timeout:3e3},{actions:a(()=>[o(u,{color:"white",variant:"text",onClick:e[16]||(e[16]=s=>t.showToast=!1)},{default:a(()=>e[35]||(e[35]=[l(" Close ")])),_:1})]),default:a(()=>[l(y(t.toastMessage)+" ",1)]),_:1},8,["modelValue","color"])]),_:1})}const se=k(Z,[["render",$]]);export{se as default};
